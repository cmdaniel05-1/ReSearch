{% extends "base.html" %}

{% block content %}

<div class="container mt-4">
    {% if current_user.type == "faculty" %}
        <h2>My Research Positions</h2>
    {% else %}
        <h2>Recommended Research Positions</h2>
        {% if recommended_positions %}
            <p>Based on your profile, we recommend the following positions:</p>
            {% for p in recommended_positions %}
                {% include '_position.html' %}
            {% endfor %}
        {% else %}
            <div class="card mb-3 mt-4 p-3">
                There are no recommended positions for you at this time
            </div>
        {% endif %}
        <hr>
        <h2>All Research Positions</h2>
    {% endif %}
    {% if positions %}
        {% for p in positions %}
            {% if p.faculty.username == current_user.username or current_user %}
                {% include '_position.html' %}
            {% endif %}
        {% endfor %}
    {% else %}
        {% if current_user.type == "faculty" %}
            <p>You have not yet posted any positions</p>
        {% else %}
            <p>There are no open positions available</p>
        {% endif %}
    {% endif %}
</div>

<script>
    document.querySelectorAll('.toggle-btn').forEach(button => {
        button.addEventListener('click', function () {
            let icon = this.querySelector('.icon');
            icon.classList.toggle('bi-caret-down-fill');
            icon.classList.toggle('bi-caret-up-fill');
        });
    });
</script>
        
{% endblock %}